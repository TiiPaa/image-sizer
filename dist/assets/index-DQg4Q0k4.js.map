{"version":3,"file":"index-DQg4Q0k4.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/components/DropZone.tsx","../../src/components/ImageMagnifier.tsx","../../src/components/ImageCropper.tsx","../../src/components/ImagePreview.tsx","../../src/components/ImageSizeInfo.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React, { useCallback, useRef, useState, useEffect } from 'react';\r\nimport { Upload, Clipboard } from 'lucide-react';\r\n\r\ninterface DropZoneProps {\r\n  onImageLoad: (file: File) => void;\r\n}\r\n\r\nexport function DropZone({ onImageLoad }: DropZoneProps) {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const dropZoneRef = useRef<HTMLDivElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFile = useCallback((file: File) => {\r\n    if (file && file.type.startsWith('image/')) {\r\n      onImageLoad(file);\r\n    }\r\n  }, [onImageLoad]);\r\n\r\n  const handleDrop = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    \r\n    const file = e.dataTransfer?.files[0];\r\n    if (file) {\r\n      handleFile(file);\r\n    }\r\n  }, [handleFile]);\r\n\r\n  const handleDragOver = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(true);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    \r\n    // Check if we're leaving the dropzone (not just moving between its children)\r\n    const rect = dropZoneRef.current?.getBoundingClientRect();\r\n    if (rect) {\r\n      const { clientX, clientY } = e;\r\n      if (\r\n        clientX <= rect.left ||\r\n        clientX >= rect.right ||\r\n        clientY <= rect.top ||\r\n        clientY >= rect.bottom\r\n      ) {\r\n        setIsDragging(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleFileChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      handleFile(file);\r\n    }\r\n    // Reset input value to allow selecting the same file again\r\n    e.target.value = '';\r\n  }, [handleFile]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    fileInputRef.current?.click();\r\n  }, []);\r\n\r\n  const handlePaste = useCallback((e: ClipboardEvent) => {\r\n    const items = e.clipboardData?.items;\r\n    if (!items) return;\r\n\r\n    for (const item of items) {\r\n      if (item.type.startsWith('image/')) {\r\n        const file = item.getAsFile();\r\n        if (file) {\r\n          handleFile(file);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }, [handleFile]);\r\n\r\n  useEffect(() => {\r\n    const dropZone = dropZoneRef.current;\r\n    if (!dropZone) return;\r\n\r\n    // Add event listeners directly to the DOM element\r\n    dropZone.addEventListener('drop', handleDrop);\r\n    dropZone.addEventListener('dragover', handleDragOver);\r\n    dropZone.addEventListener('dragleave', handleDragLeave);\r\n    document.addEventListener('paste', handlePaste);\r\n\r\n    return () => {\r\n      dropZone.removeEventListener('drop', handleDrop);\r\n      dropZone.removeEventListener('dragover', handleDragOver);\r\n      dropZone.removeEventListener('dragleave', handleDragLeave);\r\n      document.removeEventListener('paste', handlePaste);\r\n    };\r\n  }, [handleDrop, handleDragOver, handleDragLeave, handlePaste]);\r\n\r\n  return (\r\n    <div\r\n      ref={dropZoneRef}\r\n      onClick={handleClick}\r\n      className={`\r\n        border-2 border-dashed border-gray-700 rounded-lg p-12 text-center\r\n        transition-all duration-200 cursor-pointer h-[calc(100vh-12rem)]\r\n        hover:border-gray-500 hover:bg-gray-900/50\r\n        ${isDragging ? 'border-blue-500 bg-gray-900/50' : 'bg-gray-900'}\r\n      `}\r\n    >\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        className=\"hidden\"\r\n        accept=\"image/*\"\r\n        onChange={handleFileChange}\r\n      />\r\n      <div className=\"flex flex-col items-center justify-center h-full\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Upload className=\"w-12 h-12 text-gray-400\" />\r\n          <Clipboard className=\"w-12 h-12 text-gray-400\" />\r\n        </div>\r\n        <div className=\"text-gray-300 mt-4\">\r\n          <p className=\"font-medium\">Drop image here, click to upload, or paste from clipboard</p>\r\n          <p className=\"text-sm text-gray-500 mt-1\">Supports JPG, PNG, WebP</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useRef, useState, useEffect } from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ImageMagnifierProps {\r\n  imageUrl: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function ImageMagnifier({ imageUrl, onClose }: ImageMagnifierProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const imageRef = useRef<HTMLImageElement>(null);\r\n  const [magnifierPos, setMagnifierPos] = useState({ x: 0, y: 0 });\r\n  const [imagePos, setImagePos] = useState({ x: 0, y: 0, width: 0, height: 0 });\r\n  const [showMagnifier, setShowMagnifier] = useState(false);\r\n  const magnifierSize = 200; // Increased from 150 to 200\r\n  const [zoom, setZoom] = useState(2);\r\n  const MIN_ZOOM = 1.5;\r\n  const MAX_ZOOM = 6;\r\n  const ZOOM_STEP = 0.5;\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [onClose]);\r\n\r\n  useEffect(() => {\r\n    const updateImagePosition = () => {\r\n      const image = imageRef.current;\r\n      if (!image) return;\r\n\r\n      const rect = image.getBoundingClientRect();\r\n      setImagePos({\r\n        x: rect.left,\r\n        y: rect.top,\r\n        width: rect.width,\r\n        height: rect.height\r\n      });\r\n    };\r\n\r\n    updateImagePosition();\r\n    window.addEventListener('resize', updateImagePosition);\r\n    return () => window.removeEventListener('resize', updateImagePosition);\r\n  }, []);\r\n\r\n  const handleWheel = (e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    setZoom(currentZoom => {\r\n      const newZoom = currentZoom + (e.deltaY > 0 ? -ZOOM_STEP : ZOOM_STEP);\r\n      return Math.min(Math.max(newZoom, MIN_ZOOM), MAX_ZOOM);\r\n    });\r\n  };\r\n\r\n  const updateMagnifier = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    const image = imageRef.current;\r\n    if (!image) return;\r\n\r\n    // Get cursor position relative to the image\r\n    const x = e.clientX - imagePos.x;\r\n    const y = e.clientY - imagePos.y;\r\n\r\n    // Only show magnifier when mouse is over the image\r\n    if (x < 0 || x > imagePos.width || y < 0 || y > imagePos.height) {\r\n      setShowMagnifier(false);\r\n      return;\r\n    }\r\n\r\n    setShowMagnifier(true);\r\n    setMagnifierPos({ x, y });\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black flex items-center justify-center\">\r\n      <button\r\n        onClick={onClose}\r\n        className=\"absolute top-4 right-4 p-2 rounded-full bg-black/50 \r\n          text-white hover:bg-black/70 transition-colors z-10\"\r\n        aria-label=\"Close fullscreen\"\r\n      >\r\n        <X className=\"w-6 h-6\" />\r\n      </button>\r\n\r\n      <div \r\n        ref={containerRef}\r\n        className=\"relative w-full h-full flex items-center justify-center\"\r\n        onMouseMove={updateMagnifier}\r\n        onMouseLeave={() => setShowMagnifier(false)}\r\n        onWheel={handleWheel}\r\n      >\r\n        <img\r\n          ref={imageRef}\r\n          src={imageUrl}\r\n          alt=\"Fullscreen view\"\r\n          className=\"max-w-full max-h-full object-contain\"\r\n        />\r\n\r\n        {showMagnifier && (\r\n          <div\r\n            className=\"absolute pointer-events-none border-2 border-white rounded-full overflow-hidden shadow-lg\"\r\n            style={{\r\n              width: magnifierSize,\r\n              height: magnifierSize,\r\n              transform: `translate(${magnifierPos.x - magnifierSize/2}px, ${magnifierPos.y - magnifierSize/2}px)`,\r\n              left: imagePos.x,\r\n              top: imagePos.y\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                width: imagePos.width * zoom,\r\n                height: imagePos.height * zoom,\r\n                transform: `translate(${-magnifierPos.x * zoom + magnifierSize/2}px, ${-magnifierPos.y * zoom + magnifierSize/2}px)`,\r\n                backgroundImage: `url(${imageUrl})`,\r\n                backgroundSize: `${imagePos.width * zoom}px ${imagePos.height * zoom}px`,\r\n                backgroundPosition: 'top left',\r\n                backgroundRepeat: 'no-repeat'\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 px-4 py-2 rounded-full text-white text-sm\">\r\n        Zoom: {zoom.toFixed(1)}x (Use mouse wheel to adjust)\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useRef, useEffect } from 'react';\r\nimport { X, Check, Move, Eye, EyeOff, Unlock, Lock, ArrowLeftRight } from 'lucide-react';\r\n\r\ninterface ImageCropperProps {\r\n  imageUrl: string;\r\n  onClose: () => void;\r\n  onImageUpdate?: (newUrl: string) => void;\r\n}\r\n\r\nconst ASPECT_RATIOS = [\r\n  { name: '16:9', value: 16/9 },\r\n  { name: '4:3', value: 4/3 },\r\n  { name: '3:2', value: 3/2 },\r\n  { name: '1:1', value: 1 },\r\n  { name: '2:3', value: 2/3 },\r\n  { name: '3:4', value: 3/4 },\r\n  { name: '9:16', value: 9/16 },\r\n  { name: 'Custom', value: 0 }\r\n];\r\n\r\nexport function ImageCropper({ imageUrl, onClose, onImageUpdate }: ImageCropperProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const imageRef = useRef<HTMLImageElement>(null);\r\n  const [cropBox, setCropBox] = useState({ x: 0, y: 0, width: 0, height: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [currentRatioIndex, setCurrentRatioIndex] = useState(0);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [lockAspectRatio, setLockAspectRatio] = useState(true);\r\n  const [resizeHandle, setResizeHandle] = useState<string | null>(null);\r\n  const [hoveredButton, setHoveredButton] = useState<string | null>(null);\r\n  const [customWidth, setCustomWidth] = useState(16);\r\n  const [customHeight, setCustomHeight] = useState(9);\r\n  const [customMode, setCustomMode] = useState<'ratio' | 'pixels'>('ratio');\r\n  const [pixelWidth, setPixelWidth] = useState(1920);\r\n  const [pixelHeight, setPixelHeight] = useState(1080);\r\n\r\n  const isCustomRatio = currentRatioIndex === ASPECT_RATIOS.length - 1;\r\n  const customRatioValue = customWidth / customHeight;\r\n  const currentRatio = lockAspectRatio\r\n    ? (isCustomRatio ? (customMode === 'ratio' ? customRatioValue : pixelWidth / pixelHeight) : ASPECT_RATIOS[currentRatioIndex].value)\r\n    : null;\r\n\r\n  const swapRatioDimensions = () => {\r\n    const temp = customWidth;\r\n    setCustomWidth(customHeight);\r\n    setCustomHeight(temp);\r\n  };\r\n\r\n  const swapPixelDimensions = () => {\r\n    const temp = pixelWidth;\r\n    setPixelWidth(pixelHeight);\r\n    setPixelHeight(temp);\r\n  };\r\n\r\n  const initializeCropBox = () => {\r\n    const img = imageRef.current;\r\n    if (!img) return;\r\n\r\n    const imgRect = img.getBoundingClientRect();\r\n    const imgWidth = imgRect.width;\r\n    const imgHeight = imgRect.height;\r\n\r\n    let boxWidth: number;\r\n    let boxHeight: number;\r\n\r\n    // If in pixel mode with custom ratio, calculate box size based on target pixel dimensions\r\n    if (isCustomRatio && customMode === 'pixels') {\r\n      // Calculate scale to fit target dimensions within displayed image\r\n      const scaleX = img.naturalWidth / imgRect.width;\r\n      const scaleY = img.naturalHeight / imgRect.height;\r\n\r\n      // Target dimensions in display pixels\r\n      boxWidth = pixelWidth / scaleX;\r\n      boxHeight = pixelHeight / scaleY;\r\n\r\n      // If the box is too large, scale it down proportionally\r\n      if (boxWidth > imgWidth || boxHeight > imgHeight) {\r\n        const scale = Math.min(imgWidth / boxWidth, imgHeight / boxHeight) * 0.8;\r\n        boxWidth *= scale;\r\n        boxHeight *= scale;\r\n      }\r\n    } else {\r\n      boxWidth = imgWidth * 0.8;\r\n      boxHeight = currentRatio ? boxWidth / currentRatio : imgHeight * 0.8;\r\n\r\n      // Adjust if the height exceeds the image bounds\r\n      if (boxHeight > imgHeight * 0.8) {\r\n        boxHeight = imgHeight * 0.8;\r\n        boxWidth = currentRatio ? boxHeight * currentRatio : imgWidth * 0.8;\r\n      }\r\n    }\r\n\r\n    const x = (imgWidth - boxWidth) / 2;\r\n    const y = (imgHeight - boxHeight) / 2;\r\n\r\n    setCropBox({ x, y, width: boxWidth, height: boxHeight });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageLoaded) {\r\n      initializeCropBox();\r\n    }\r\n  }, [imageLoaded, currentRatio, lockAspectRatio, customWidth, customHeight, customMode, pixelWidth, pixelHeight]);\r\n\r\n  const handleWheel = (e: WheelEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (e.shiftKey) {\r\n      const img = imageRef.current;\r\n      if (!img) return;\r\n      \r\n      const imgRect = img.getBoundingClientRect();\r\n      const scaleFactor = e.deltaY > 0 ? 0.95 : 1.05;\r\n      \r\n      let newWidth = cropBox.width * scaleFactor;\r\n      let newHeight = currentRatio ? newWidth / currentRatio : cropBox.height * scaleFactor;\r\n      \r\n      if (newWidth > imgRect.width) {\r\n        newWidth = imgRect.width;\r\n        newHeight = currentRatio ? newWidth / currentRatio : newHeight;\r\n      }\r\n      if (newHeight > imgRect.height) {\r\n        newHeight = imgRect.height;\r\n        newWidth = currentRatio ? newHeight * currentRatio : newWidth;\r\n      }\r\n      \r\n      const x = cropBox.x + (cropBox.width - newWidth) / 2;\r\n      const y = cropBox.y + (cropBox.height - newHeight) / 2;\r\n      \r\n      const finalX = Math.max(0, Math.min(x, imgRect.width - newWidth));\r\n      const finalY = Math.max(0, Math.min(y, imgRect.height - newHeight));\r\n      \r\n      setCropBox({\r\n        x: finalX,\r\n        y: finalY,\r\n        width: newWidth,\r\n        height: newHeight\r\n      });\r\n    } else if (lockAspectRatio) {\r\n      setCurrentRatioIndex(prev => {\r\n        if (e.deltaY > 0) {\r\n          return prev === ASPECT_RATIOS.length - 1 ? 0 : prev + 1;\r\n        } else {\r\n          return prev === 0 ? ASPECT_RATIOS.length - 1 : prev - 1;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const element = containerRef.current;\r\n    if (!element) return;\r\n\r\n    element.addEventListener('wheel', handleWheel, { passive: false });\r\n    return () => element.removeEventListener('wheel', handleWheel);\r\n  }, [cropBox, currentRatio, lockAspectRatio]);\r\n\r\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    const rect = container.getBoundingClientRect();\r\n    \r\n    if ((e.target as HTMLElement).dataset.handle) {\r\n      setResizeHandle((e.target as HTMLElement).dataset.handle || null);\r\n    } else {\r\n      setIsDragging(true);\r\n      setDragStart({\r\n        x: e.clientX - rect.left - cropBox.x,\r\n        y: e.clientY - rect.top - cropBox.y\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!containerRef.current || !imageRef.current) return;\r\n\r\n    const containerRect = containerRef.current.getBoundingClientRect();\r\n    const imgRect = imageRef.current.getBoundingClientRect();\r\n\r\n    if (isDragging) {\r\n      const newX = e.clientX - containerRect.left - dragStart.x;\r\n      const newY = e.clientY - containerRect.top - dragStart.y;\r\n\r\n      const x = Math.max(0, Math.min(newX, imgRect.width - cropBox.width));\r\n      const y = Math.max(0, Math.min(newY, imgRect.height - cropBox.height));\r\n\r\n      setCropBox(prev => ({ ...prev, x, y }));\r\n    } else if (resizeHandle) {\r\n      const mouseX = e.clientX - containerRect.left;\r\n      const mouseY = e.clientY - containerRect.top;\r\n\r\n      let newWidth = cropBox.width;\r\n      let newHeight = cropBox.height;\r\n      let newX = cropBox.x;\r\n      let newY = cropBox.y;\r\n\r\n      if (resizeHandle.includes('e')) {\r\n        newWidth = Math.max(50, Math.min(mouseX - cropBox.x, imgRect.width - cropBox.x));\r\n        if (currentRatio) {\r\n          newHeight = newWidth / currentRatio;\r\n        }\r\n      }\r\n      if (resizeHandle.includes('w')) {\r\n        const maxX = cropBox.x + cropBox.width - 50;\r\n        newX = Math.max(0, Math.min(mouseX, maxX));\r\n        newWidth = cropBox.x + cropBox.width - newX;\r\n        if (currentRatio) {\r\n          newHeight = newWidth / currentRatio;\r\n          newY = cropBox.y + (cropBox.height - newHeight) / 2;\r\n        }\r\n      }\r\n      if (resizeHandle.includes('s')) {\r\n        newHeight = Math.max(50, Math.min(mouseY - cropBox.y, imgRect.height - cropBox.y));\r\n        if (currentRatio) {\r\n          newWidth = newHeight * currentRatio;\r\n        }\r\n      }\r\n      if (resizeHandle.includes('n')) {\r\n        const maxY = cropBox.y + cropBox.height - 50;\r\n        newY = Math.max(0, Math.min(mouseY, maxY));\r\n        newHeight = cropBox.y + cropBox.height - newY;\r\n        if (currentRatio) {\r\n          newWidth = newHeight * currentRatio;\r\n          newX = cropBox.x + (cropBox.width - newWidth) / 2;\r\n        }\r\n      }\r\n\r\n      // Ensure the crop box stays within image bounds\r\n      if (newX + newWidth > imgRect.width) {\r\n        newWidth = imgRect.width - newX;\r\n        if (currentRatio) {\r\n          newHeight = newWidth / currentRatio;\r\n        }\r\n      }\r\n      if (newY + newHeight > imgRect.height) {\r\n        newHeight = imgRect.height - newY;\r\n        if (currentRatio) {\r\n          newWidth = newHeight * currentRatio;\r\n        }\r\n      }\r\n\r\n      setCropBox({\r\n        x: newX,\r\n        y: newY,\r\n        width: newWidth,\r\n        height: newHeight\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n    setResizeHandle(null);\r\n  };\r\n\r\n  const getCroppedImage = () => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx || !imageRef.current) return null;\r\n\r\n    const img = imageRef.current;\r\n    const imgRect = img.getBoundingClientRect();\r\n\r\n    // Calculate the scale between displayed size and natural size\r\n    const scaleX = img.naturalWidth / imgRect.width;\r\n    const scaleY = img.naturalHeight / imgRect.height;\r\n\r\n    let canvasWidth: number;\r\n    let canvasHeight: number;\r\n\r\n    // If in pixel mode with custom ratio, use exact pixel dimensions\r\n    if (isCustomRatio && customMode === 'pixels') {\r\n      canvasWidth = pixelWidth;\r\n      canvasHeight = pixelHeight;\r\n    } else {\r\n      // Set canvas dimensions to maintain the exact aspect ratio\r\n      canvasWidth = Math.round(cropBox.width * scaleX);\r\n      canvasHeight = Math.round(cropBox.height * scaleY);\r\n    }\r\n\r\n    canvas.width = canvasWidth;\r\n    canvas.height = canvasHeight;\r\n\r\n    // Draw the cropped portion\r\n    const sourceX = Math.round(cropBox.x * scaleX);\r\n    const sourceY = Math.round(cropBox.y * scaleY);\r\n    const sourceWidth = Math.round(cropBox.width * scaleX);\r\n    const sourceHeight = Math.round(cropBox.height * scaleY);\r\n\r\n    ctx.drawImage(\r\n      img,\r\n      sourceX,\r\n      sourceY,\r\n      sourceWidth,\r\n      sourceHeight,\r\n      0,\r\n      0,\r\n      canvasWidth,\r\n      canvasHeight\r\n    );\r\n\r\n    return canvas;\r\n  };\r\n\r\n  const handleCrop = () => {\r\n    const canvas = getCroppedImage();\r\n    if (!canvas) return;\r\n    onImageUpdate?.(canvas.toDataURL());\r\n    onClose();\r\n  };\r\n\r\n  const togglePreview = () => {\r\n    if (showPreview) {\r\n      setShowPreview(false);\r\n      setPreviewUrl(null);\r\n    } else {\r\n      const canvas = getCroppedImage();\r\n      if (canvas) {\r\n        setPreviewUrl(canvas.toDataURL());\r\n        setShowPreview(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black/90 flex items-center justify-center\">\r\n      <div className=\"absolute top-4 right-4 flex gap-2 z-20\">\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={() => setLockAspectRatio(!lockAspectRatio)}\r\n            className=\"p-2 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-colors\"\r\n            onMouseEnter={() => setHoveredButton('lock')}\r\n            onMouseLeave={() => setHoveredButton(null)}\r\n          >\r\n            {lockAspectRatio ? <Lock className=\"w-6 h-6\" /> : <Unlock className=\"w-6 h-6\" />}\r\n          </button>\r\n          {hoveredButton === 'lock' && (\r\n            <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1.5 bg-black/75 text-white text-sm rounded-lg whitespace-nowrap\">\r\n              {lockAspectRatio ? \"Unlock aspect ratio\" : \"Lock aspect ratio\"}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={togglePreview}\r\n            className=\"p-2 rounded-full bg-purple-500 text-white hover:bg-purple-600 transition-colors\"\r\n            onMouseEnter={() => setHoveredButton('preview')}\r\n            onMouseLeave={() => setHoveredButton(null)}\r\n          >\r\n            {showPreview ? <EyeOff className=\"w-6 h-6\" /> : <Eye className=\"w-6 h-6\" />}\r\n          </button>\r\n          {hoveredButton === 'preview' && (\r\n            <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1.5 bg-black/75 text-white text-sm rounded-lg whitespace-nowrap\">\r\n              {showPreview ? \"Hide preview\" : \"Show preview\"}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={handleCrop}\r\n            className=\"p-2 rounded-full bg-green-500 text-white hover:bg-green-600 transition-colors\"\r\n            onMouseEnter={() => setHoveredButton('apply')}\r\n            onMouseLeave={() => setHoveredButton(null)}\r\n          >\r\n            <Check className=\"w-6 h-6\" />\r\n          </button>\r\n          {hoveredButton === 'apply' && (\r\n            <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1.5 bg-black/75 text-white text-sm rounded-lg whitespace-nowrap\">\r\n              Apply crop\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors\"\r\n            onMouseEnter={() => setHoveredButton('close')}\r\n            onMouseLeave={() => setHoveredButton(null)}\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n          {hoveredButton === 'close' && (\r\n            <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-3 py-1.5 bg-black/75 text-white text-sm rounded-lg whitespace-nowrap\">\r\n              Cancel\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 z-20\">\r\n        <div className=\"flex gap-2\">\r\n          {lockAspectRatio && ASPECT_RATIOS.map((ratio, index) => (\r\n            <button\r\n              key={ratio.name}\r\n              onClick={() => setCurrentRatioIndex(index)}\r\n              className={`px-3 py-1 rounded-full transition-colors ${\r\n                index === currentRatioIndex\r\n                  ? 'bg-white text-black'\r\n                  : 'bg-black/50 text-white hover:bg-black/70'\r\n              }`}\r\n            >\r\n              {ratio.name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {lockAspectRatio && isCustomRatio && (\r\n          <div className=\"flex flex-col gap-2 items-center justify-center mt-2\">\r\n            <div className=\"flex gap-1 bg-black/70 rounded-full p-1\">\r\n              <button\r\n                onClick={() => setCustomMode('ratio')}\r\n                className={`px-3 py-1 rounded-full text-sm transition-colors ${\r\n                  customMode === 'ratio'\r\n                    ? 'bg-white text-black'\r\n                    : 'text-white hover:bg-white/10'\r\n                }`}\r\n              >\r\n                Ratio\r\n              </button>\r\n              <button\r\n                onClick={() => setCustomMode('pixels')}\r\n                className={`px-3 py-1 rounded-full text-sm transition-colors ${\r\n                  customMode === 'pixels'\r\n                    ? 'bg-white text-black'\r\n                    : 'text-white hover:bg-white/10'\r\n                }`}\r\n              >\r\n                Pixels\r\n              </button>\r\n            </div>\r\n\r\n            {customMode === 'ratio' ? (\r\n              <div className=\"flex gap-2 items-center\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"999\"\r\n                  value={customWidth}\r\n                  onChange={(e) => setCustomWidth(Math.max(1, parseInt(e.target.value) || 1))}\r\n                  className=\"w-16 px-2 py-1 rounded bg-black/70 text-white text-center border border-white/30 focus:border-white/60 focus:outline-none\"\r\n                  placeholder=\"W\"\r\n                />\r\n                <button\r\n                  onClick={swapRatioDimensions}\r\n                  className=\"p-1 rounded bg-black/70 text-white hover:bg-white/20 transition-colors border border-white/30\"\r\n                  title=\"Swap width and height\"\r\n                >\r\n                  <ArrowLeftRight className=\"w-4 h-4\" />\r\n                </button>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"999\"\r\n                  value={customHeight}\r\n                  onChange={(e) => setCustomHeight(Math.max(1, parseInt(e.target.value) || 1))}\r\n                  className=\"w-16 px-2 py-1 rounded bg-black/70 text-white text-center border border-white/30 focus:border-white/60 focus:outline-none\"\r\n                  placeholder=\"H\"\r\n                />\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex gap-2 items-center\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"9999\"\r\n                  value={pixelWidth}\r\n                  onChange={(e) => setPixelWidth(Math.max(1, parseInt(e.target.value) || 1))}\r\n                  className=\"w-20 px-2 py-1 rounded bg-black/70 text-white text-center border border-white/30 focus:border-white/60 focus:outline-none\"\r\n                  placeholder=\"Width\"\r\n                />\r\n                <button\r\n                  onClick={swapPixelDimensions}\r\n                  className=\"p-1 rounded bg-black/70 text-white hover:bg-white/20 transition-colors border border-white/30\"\r\n                  title=\"Swap width and height\"\r\n                >\r\n                  <ArrowLeftRight className=\"w-4 h-4\" />\r\n                </button>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  max=\"9999\"\r\n                  value={pixelHeight}\r\n                  onChange={(e) => setPixelHeight(Math.max(1, parseInt(e.target.value) || 1))}\r\n                  className=\"w-20 px-2 py-1 rounded bg-black/70 text-white text-center border border-white/30 focus:border-white/60 focus:outline-none\"\r\n                  placeholder=\"Height\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div \r\n        ref={containerRef}\r\n        className=\"relative select-none mt-16\"\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        {showPreview && previewUrl ? (\r\n          <div className=\"relative\">\r\n            <img\r\n              src={previewUrl}\r\n              alt=\"Crop preview\"\r\n              className=\"max-w-full max-h-[80vh] pointer-events-none border border-white\"\r\n              draggable={false}\r\n            />\r\n            <div className=\"absolute top-2 left-2 bg-black/70 text-white px-3 py-1 rounded-full text-sm\">\r\n              Preview\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <img\r\n              ref={imageRef}\r\n              src={imageUrl}\r\n              alt=\"Crop preview\"\r\n              className=\"max-w-full max-h-[80vh] pointer-events-none\"\r\n              draggable={false}\r\n              onLoad={() => setImageLoaded(true)}\r\n            />\r\n            \r\n            {imageLoaded && (\r\n              <>\r\n                <div\r\n                  className=\"absolute inset-0 bg-black/50\"\r\n                  style={{\r\n                    clipPath: `polygon(\r\n                      0 0,\r\n                      100% 0,\r\n                      100% 100%,\r\n                      0 100%,\r\n                      0 0,\r\n                      ${cropBox.x}px ${cropBox.y}px,\r\n                      ${cropBox.x}px ${cropBox.y + cropBox.height}px,\r\n                      ${cropBox.x + cropBox.width}px ${cropBox.y + cropBox.height}px,\r\n                      ${cropBox.x + cropBox.width}px ${cropBox.y}px,\r\n                      ${cropBox.x}px ${cropBox.y}px\r\n                    )`\r\n                  }}\r\n                />\r\n\r\n                <div\r\n                  className=\"absolute border-2 border-white cursor-move\"\r\n                  style={{\r\n                    top: cropBox.y,\r\n                    left: cropBox.x,\r\n                    width: cropBox.width,\r\n                    height: cropBox.height\r\n                  }}\r\n                  onMouseDown={handleMouseDown}\r\n                >\r\n                  <div className=\"absolute inset-0 flex items-center justify-center text-white/50\">\r\n                    <Move className=\"w-6 h-6\" />\r\n                  </div>\r\n                  \r\n                  {/* Resize handles */}\r\n                  <div\r\n                    className=\"absolute top-0 left-0 w-4 h-4 -translate-x-1/2 -translate-y-1/2 cursor-nw-resize\"\r\n                    data-handle=\"nw\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute top-0 right-0 w-4 h-4 translate-x-1/2 -translate-y-1/2 cursor-ne-resize\"\r\n                    data-handle=\"ne\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute bottom-0 left-0 w-4 h-4 -translate-x-1/2 translate-y-1/2 cursor-sw-resize\"\r\n                    data-handle=\"sw\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute bottom-0 right-0 w-4 h-4 translate-x-1/2 translate-y-1/2 cursor-se-resize\"\r\n                    data-handle=\"se\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute top-0 left-1/2 w-4 h-4 -translate-x-1/2 -translate-y-1/2 cursor-n-resize\"\r\n                    data-handle=\"n\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute bottom-0 left-1/2 w-4 h-4 -translate-x-1/2 translate-y-1/2 cursor-s-resize\"\r\n                    data-handle=\"s\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute left-0 top-1/2 w-4 h-4 -translate-x-1/2 -translate-y-1/2 cursor-w-resize\"\r\n                    data-handle=\"w\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                  <div\r\n                    className=\"absolute right-0 top-1/2 w-4 h-4 translate-x-1/2 -translate-y-1/2 cursor-e-resize\"\r\n                    data-handle=\"e\"\r\n                    onMouseDown={handleMouseDown}\r\n                  />\r\n                </div>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 px-4 py-2 rounded-full text-white text-sm\">\r\n        {showPreview ? \r\n          \"Press the eye icon to return to editing\" : \r\n          lockAspectRatio ?\r\n            \"Mouse wheel to switch ratio • Shift + wheel to resize • Drag to move\" :\r\n            \"Drag corners to resize freely • Click lock icon to maintain aspect ratio\"\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useRef } from 'react';\r\nimport { X, Maximize2, Crop, Download, Edit2, Check } from 'lucide-react';\r\nimport { ImageMagnifier } from './ImageMagnifier';\r\nimport { ImageCropper } from './ImageCropper';\r\n\r\ninterface ImagePreviewProps {\r\n  imageInfo: {\r\n    url: string;\r\n    width: number;\r\n    height: number;\r\n    name: string;\r\n    size: number;\r\n    type: string;\r\n    file: File;\r\n  };\r\n  onClear: () => void;\r\n  onImageUpdate: (newUrl: string) => void;\r\n}\r\n\r\nexport function ImagePreview({ imageInfo, onClear, onImageUpdate }: ImagePreviewProps) {\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [isCropping, setIsCropping] = useState(false);\r\n  const imageRef = useRef<HTMLImageElement>(null);\r\n  const [isEditingName, setIsEditingName] = useState(false);\r\n  const [modifiedName, setModifiedName] = useState(\"00016-189372747_x0.5_modified.png\");\r\n\r\n  const handleCroppedImage = (newUrl: string) => {\r\n    onImageUpdate(newUrl);\r\n    setIsCropping(false);\r\n  };\r\n\r\n  const getModifiedFilename = () => modifiedName;\r\n\r\n  const downloadImage = () => {\r\n    const a = document.createElement('a');\r\n    a.href = imageInfo.url;\r\n    a.download = getModifiedFilename();\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  const handleDragStart = (e: React.DragEvent<HTMLImageElement>) => {\r\n    const modifiedFilename = getModifiedFilename();\r\n    \r\n    // Set the basic text data\r\n    e.dataTransfer.setData('text/plain', modifiedFilename);\r\n    e.dataTransfer.setData('text/uri-list', imageInfo.url);\r\n    \r\n    // Create a canvas to get the image data\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d', { alpha: false });\r\n    if (!ctx || !imageRef.current) return;\r\n\r\n    const rect = imageRef.current.getBoundingClientRect();\r\n    canvas.width = rect.width;\r\n    canvas.height = rect.height;\r\n    ctx.drawImage(imageRef.current, 0, 0, canvas.width, canvas.height);\r\n    \r\n    // Create a File object with the correct filename\r\n    canvas.toBlob((blob) => {\r\n      if (!blob) return;\r\n      // Create a new file with the modified filename\r\n      const file = new File([blob], modifiedFilename, { \r\n        type: imageInfo.type,\r\n        lastModified: Date.now()\r\n      });\r\n      \r\n      // Set the file data for drag and drop\r\n      e.dataTransfer.setData('application/x-moz-file', '');\r\n      e.dataTransfer.items.add(file);\r\n    }, imageInfo.type);\r\n\r\n    // Set drag image and cursor\r\n    if (imageRef.current) {\r\n      e.dataTransfer.setDragImage(imageRef.current, rect.width / 2, rect.height / 2);\r\n      e.currentTarget.style.cursor = 'move';\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = (e: React.DragEvent<HTMLImageElement>) => {\r\n    if (e.currentTarget) {\r\n      e.currentTarget.style.cursor = 'move';\r\n    }\r\n  };\r\n\r\n  const handleNameSubmit = () => {\r\n    if (modifiedName.trim()) {\r\n      setIsEditingName(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-gray-900 rounded-lg overflow-hidden\">\r\n        <div className=\"relative aspect-auto h-[calc(100vh-32rem)] min-h-[200px] group\">\r\n          <img\r\n            ref={imageRef}\r\n            src={imageInfo.url}\r\n            alt=\"Preview\"\r\n            className=\"absolute inset-0 w-full h-full object-contain cursor-move\"\r\n            draggable={true}\r\n            onDragStart={handleDragStart}\r\n            onDragEnd={handleDragEnd}\r\n            style={{ cursor: 'move' }}\r\n          />\r\n\r\n          <div className=\"absolute inset-0 pointer-events-none\">\r\n            <div className=\"absolute top-4 right-4 pointer-events-auto\">\r\n              <button\r\n                onClick={onClear}\r\n                className=\"p-1 rounded-full bg-black/50 \r\n                  text-white hover:bg-black/70 transition-colors\"\r\n                aria-label=\"Clear image\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"absolute bottom-4 right-4 flex gap-2 pointer-events-auto\">\r\n              <button\r\n                onClick={downloadImage}\r\n                className=\"p-3 rounded-full bg-black/50 \r\n                  text-white hover:bg-black/70 transition-colors transform hover:scale-110\"\r\n                aria-label=\"Download image\"\r\n              >\r\n                <Download className=\"w-6 h-6\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setIsFullscreen(true)}\r\n                className=\"p-3 rounded-full bg-black/50 \r\n                  text-white hover:bg-black/70 transition-colors transform hover:scale-110\"\r\n                aria-label=\"View fullscreen\"\r\n              >\r\n                <Maximize2 className=\"w-6 h-6\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setIsCropping(true)}\r\n                className=\"p-3 rounded-full bg-black/50 \r\n                  text-white hover:bg-black/70 transition-colors transform hover:scale-110\"\r\n                aria-label=\"Crop image\"\r\n              >\r\n                <Crop className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-3 bg-black/30 flex items-center gap-2\">\r\n          {isEditingName ? (\r\n            <div className=\"flex-1 flex items-center gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={modifiedName}\r\n                onChange={(e) => setModifiedName(e.target.value)}\r\n                onKeyDown={(e) => e.key === 'Enter' && handleNameSubmit()}\r\n                className=\"flex-1 bg-black/30 text-white px-3 py-1.5 rounded border border-gray-700 focus:outline-none focus:border-blue-500\"\r\n                autoFocus\r\n              />\r\n              <button\r\n                onClick={handleNameSubmit}\r\n                className=\"p-1.5 rounded-full bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors\"\r\n              >\r\n                <Check className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <span className=\"flex-1 text-gray-300 text-sm truncate\">{modifiedName}</span>\r\n              <button\r\n                onClick={() => setIsEditingName(true)}\r\n                className=\"p-1.5 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors\"\r\n              >\r\n                <Edit2 className=\"w-4 h-4\" />\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {isFullscreen && (\r\n        <ImageMagnifier \r\n          imageUrl={imageInfo.url}\r\n          onClose={() => setIsFullscreen(false)}\r\n        />\r\n      )}\r\n\r\n      {isCropping && (\r\n        <ImageCropper\r\n          imageUrl={imageInfo.url}\r\n          onClose={() => setIsCropping(false)}\r\n          onImageUpdate={handleCroppedImage}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}","import React, { useState, useCallback } from 'react';\r\nimport { Image as ImageIcon } from 'lucide-react';\r\n\r\ninterface ImageSizeInfoProps {\r\n  imageInfo: {\r\n    url: string;\r\n    width: number;\r\n    height: number;\r\n    name: string;\r\n    size: number;\r\n    file: File;\r\n  } | null;\r\n  onImageUpdate: (newUrl: string) => void;\r\n}\r\n\r\nexport function ImageSizeInfo({ imageInfo, onImageUpdate }: ImageSizeInfoProps) {\r\n  const [exportFormat, setExportFormat] = useState<'image/jpeg' | 'image/png'>('image/png');\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    const kb = bytes / 1024;\r\n    return `${kb.toFixed(2)} KB`;\r\n  };\r\n\r\n  const calculateRatio = (width: number, height: number) => {\r\n    const gcd = (a: number, b: number): number => {\r\n      return b === 0 ? a : gcd(b, a % b);\r\n    };\r\n    const divisor = gcd(width, height);\r\n    return `${width/divisor}:${height/divisor}`;\r\n  };\r\n\r\n  const getImageFormat = (type: string) => {\r\n    return type.split('/')[1].toUpperCase();\r\n  };\r\n\r\n  const getProportionalSizes = useCallback(() => {\r\n    if (!imageInfo) return [];\r\n    \r\n    const scales = [\r\n      { scale: 'x1', multiplier: 1 },\r\n      { scale: 'x2', multiplier: 2 },\r\n      { scale: 'x1.5', multiplier: 1.5 },\r\n      { scale: 'x0.75', multiplier: 0.75 },\r\n      { scale: 'x0.5', multiplier: 0.5 }\r\n    ];\r\n\r\n    return scales.map(({ scale, multiplier }) => ({\r\n      scale,\r\n      width: Math.round(imageInfo.width * multiplier),\r\n      height: Math.round(imageInfo.height * multiplier)\r\n    }));\r\n  }, [imageInfo]);\r\n\r\n  const getCommonSizes = useCallback(() => {\r\n    if (!imageInfo) return [];\r\n\r\n    const aspectRatio = imageInfo.height / imageInfo.width;\r\n\r\n    return [\r\n      { name: 'small', width: 320, height: Math.round(320 * aspectRatio) },\r\n      { name: 'medium', width: 768, height: Math.round(768 * aspectRatio) },\r\n      { name: 'large', width: 1024, height: Math.round(1024 * aspectRatio) },\r\n      { name: 'xl', width: 1280, height: Math.round(1280 * aspectRatio) },\r\n      { name: 'xxl', width: 1920, height: Math.round(1920 * aspectRatio) }\r\n    ];\r\n  }, [imageInfo]);\r\n\r\n  const resizeImage = useCallback(async (width: number, height: number) => {\r\n    if (!imageInfo) return;\r\n\r\n    // Create a new image element\r\n    const img = new Image();\r\n    img.src = imageInfo.url;\r\n\r\n    // Wait for the image to load\r\n    await new Promise((resolve) => {\r\n      img.onload = resolve;\r\n    });\r\n    \r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    // Fill with white background for JPEG\r\n    if (exportFormat === 'image/jpeg') {\r\n      ctx.fillStyle = '#FFFFFF';\r\n      ctx.fillRect(0, 0, width, height);\r\n    }\r\n\r\n    // Draw the image\r\n    ctx.drawImage(img, 0, 0, width, height);\r\n\r\n    // Get the new filename with correct extension\r\n    const extension = exportFormat === 'image/jpeg' ? '.jpg' : '.png';\r\n    const baseFilename = imageInfo.name.substring(0, imageInfo.name.lastIndexOf('.')) || imageInfo.name;\r\n    const newFilename = `${baseFilename}_modified${extension}`;\r\n\r\n    // Convert to blob and create URL\r\n    const blob = await new Promise<Blob | null>(resolve => {\r\n      canvas.toBlob(\r\n        blob => resolve(blob),\r\n        exportFormat,\r\n        exportFormat === 'image/jpeg' ? 0.92 : undefined\r\n      );\r\n    });\r\n\r\n    if (!blob) return;\r\n\r\n    const url = URL.createObjectURL(blob);\r\n    onImageUpdate(url);\r\n  }, [imageInfo, exportFormat, onImageUpdate]);\r\n\r\n  if (!imageInfo) {\r\n    return (\r\n      <div className=\"bg-gray-900 rounded-lg p-6 space-y-8\">\r\n        <div className=\"flex flex-col items-center justify-center py-12 text-gray-400\">\r\n          <ImageIcon className=\"w-16 h-16 mb-4 opacity-50\" />\r\n          <p className=\"text-lg\">Upload an image to see size information</p>\r\n          <p className=\"text-sm opacity-75\">Supports JPG, PNG, WebP</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-gray-900 rounded-lg p-6 space-y-8\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"bg-black/50 rounded-lg p-4\">\r\n          <div className=\"text-gray-400 text-sm mb-1\">Size</div>\r\n          <div className=\"text-white font-semibold\">\r\n            {formatFileSize(imageInfo.size)}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-black/50 rounded-lg p-4\">\r\n          <div className=\"text-gray-400 text-sm mb-1\">Dimensions</div>\r\n          <div className=\"text-white font-semibold\">\r\n            {imageInfo.width} × {imageInfo.height}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-black/50 rounded-lg p-4\">\r\n          <div className=\"text-gray-400 text-sm mb-1\">Ratio</div>\r\n          <div className=\"text-white font-semibold\">\r\n            {calculateRatio(imageInfo.width, imageInfo.height)}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-black/50 rounded-lg p-4\">\r\n          <div className=\"text-gray-400 text-sm mb-1\">Format</div>\r\n          <div className=\"text-white font-semibold\">\r\n            {getImageFormat(imageInfo.file.type)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-black/30 rounded-lg p-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-gray-400 text-sm\">Export Format</span>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => setExportFormat('image/png')}\r\n              className={`px-3 py-1 rounded-full text-sm transition-colors ${\r\n                exportFormat === 'image/png'\r\n                  ? 'bg-white text-black'\r\n                  : 'bg-black/50 text-white hover:bg-black/70'\r\n              }`}\r\n            >\r\n              PNG\r\n            </button>\r\n            <button\r\n              onClick={() => setExportFormat('image/jpeg')}\r\n              className={`px-3 py-1 rounded-full text-sm transition-colors ${\r\n                exportFormat === 'image/jpeg'\r\n                  ? 'bg-white text-black'\r\n                  : 'bg-black/50 text-white hover:bg-black/70'\r\n              }`}\r\n            >\r\n              JPG\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <h3 className=\"text-gray-400 text-sm font-medium mb-4\">\r\n          Proportional Sizes\r\n        </h3>\r\n        <div className=\"space-y-2\">\r\n          {getProportionalSizes().map(({ scale, width, height }) => (\r\n            <button\r\n              key={scale}\r\n              onClick={() => resizeImage(width, height)}\r\n              className=\"w-full flex items-center justify-between py-2 px-4 bg-black/30 rounded hover:bg-black/50 transition-colors\"\r\n            >\r\n              <div className=\"text-gray-300\">{scale}</div>\r\n              <div className=\"text-gray-300\">{width} × {height}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <h3 className=\"text-gray-400 text-sm font-medium mb-4\">\r\n          Common Sizes\r\n        </h3>\r\n        <div className=\"space-y-2\">\r\n          {getCommonSizes().map(({ name, width, height }) => (\r\n            <button\r\n              key={name}\r\n              onClick={() => resizeImage(width, height)}\r\n              className=\"w-full flex items-center justify-between py-2 px-4 bg-black/30 rounded hover:bg-black/50 transition-colors\"\r\n            >\r\n              <div className=\"text-gray-300\">{name}</div>\r\n              <div className=\"text-gray-300\">{width} × {height}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useState, useCallback, useRef } from 'react';\r\nimport { DropZone } from './components/DropZone';\r\nimport { ImagePreview } from './components/ImagePreview';\r\nimport { ImageSizeInfo } from './components/ImageSizeInfo';\r\nimport { RotateCcw, Upload } from 'lucide-react';\r\n\r\ninterface ImageInfo {\r\n  url: string;\r\n  width: number;\r\n  height: number;\r\n  name: string;\r\n  size: number;\r\n  type: string;\r\n  file: File;\r\n  originalUrl: string;\r\n}\r\n\r\nfunction App() {\r\n  const [imageInfo, setImageInfo] = useState<ImageInfo | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleImageLoad = useCallback((file: File) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setImageInfo({\r\n          url: e.target?.result as string,\r\n          originalUrl: e.target?.result as string,\r\n          width: img.width,\r\n          height: img.height,\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          file: file\r\n        });\r\n      };\r\n      img.src = e.target?.result as string;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }, []);\r\n\r\n  const handleImageUpdate = useCallback((newUrl: string) => {\r\n    if (!imageInfo) return;\r\n\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      fetch(newUrl)\r\n        .then(res => res.blob())\r\n        .then(blob => {\r\n          const file = new File([blob], imageInfo.name, { type: imageInfo.type });\r\n          setImageInfo({\r\n            url: newUrl,\r\n            originalUrl: imageInfo.originalUrl,\r\n            width: img.width,\r\n            height: img.height,\r\n            name: imageInfo.name,\r\n            size: blob.size,\r\n            type: imageInfo.type,\r\n            file: file\r\n          });\r\n        });\r\n    };\r\n    img.src = newUrl;\r\n  }, [imageInfo]);\r\n\r\n  const handleReset = useCallback(() => {\r\n    if (!imageInfo) return;\r\n    handleImageUpdate(imageInfo.originalUrl);\r\n  }, [imageInfo, handleImageUpdate]);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    \r\n    const file = e.dataTransfer.files[0];\r\n    if (file && file.type.startsWith('image/')) {\r\n      handleImageLoad(file);\r\n    }\r\n  }, [handleImageLoad]);\r\n\r\n  const handleFileChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file && file.type.startsWith('image/')) {\r\n      handleImageLoad(file);\r\n    }\r\n  }, [handleImageLoad]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    fileInputRef.current?.click();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-black text-white p-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold mb-8 text-center\">\r\n          Image Sizer\r\n        </h1>\r\n        \r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          <div className=\"space-y-6\">\r\n            {!imageInfo ? (\r\n              <DropZone onImageLoad={handleImageLoad} />\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between px-1\">\r\n                    <div className=\"text-sm text-gray-400 font-medium\">Original</div>\r\n                    <button\r\n                      onClick={handleReset}\r\n                      className=\"flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 transition-colors text-sm\"\r\n                    >\r\n                      <RotateCcw className=\"w-4 h-4\" />\r\n                      Reset\r\n                    </button>\r\n                  </div>\r\n                  <div\r\n                    onClick={handleClick}\r\n                    className={`bg-gray-900 rounded-lg overflow-hidden relative group cursor-pointer\r\n                      ${isDragging ? 'ring-2 ring-blue-500' : ''}`}\r\n                    onDragOver={(e) => {\r\n                      e.preventDefault();\r\n                      setIsDragging(true);\r\n                    }}\r\n                    onDragLeave={() => setIsDragging(false)}\r\n                    onDrop={handleDrop}\r\n                  >\r\n                    <div className=\"relative aspect-auto min-h-[200px] max-h-[400px]\">\r\n                      <img\r\n                        src={imageInfo.originalUrl}\r\n                        alt=\"Original\"\r\n                        className=\"absolute inset-0 w-full h-full object-contain\"\r\n                      />\r\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                        <div className=\"flex flex-col items-center gap-4\">\r\n                          <Upload className=\"w-12 h-12 text-white\" />\r\n                          <div className=\"text-center\">\r\n                            <p className=\"font-medium text-white text-lg\">Click or drop to replace image</p>\r\n                            <p className=\"text-sm text-gray-300 mt-1\">Supports JPG, PNG, WebP</p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <input\r\n                      ref={fileInputRef}\r\n                      type=\"file\"\r\n                      className=\"hidden\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleFileChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"text-sm text-gray-400 font-medium px-1\">Modified</div>\r\n                  <ImagePreview \r\n                    imageInfo={imageInfo} \r\n                    onClear={() => setImageInfo(null)}\r\n                    onImageUpdate={handleImageUpdate}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <ImageSizeInfo \r\n            imageInfo={imageInfo} \r\n            onImageUpdate={handleImageUpdate}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import { StrictMode } from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\n\r\ncreateRoot(document.getElementById('root')!).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>\r\n);\r\n"],"names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","DropZone","onImageLoad","isDragging","setIsDragging","useState","dropZoneRef","useRef","fileInputRef","handleFile","useCallback","file","startsWith","handleDrop","preventDefault","stopPropagation","_a","dataTransfer","files","handleDragOver","handleDragLeave","rect","getBoundingClientRect","clientX","clientY","left","right","top","bottom","handleFileChange","target","value","handleClick","click","handlePaste","items","clipboardData","item","getAsFile","useEffect","dropZone","addEventListener","document","removeEventListener","jsxRuntimeExports","onClick","className","children","accept","onChange","Upload","Clipboard","ImageMagnifier","imageUrl","onClose","containerRef","imageRef","magnifierPos","setMagnifierPos","x","y","imagePos","setImagePos","width","height","showMagnifier","setShowMagnifier","magnifierSize","zoom","setZoom","handleKeyDown","window","updateImagePosition","image","X","onMouseMove","onMouseLeave","onWheel","currentZoom","newZoom","deltaY","Math","min","max","src","alt","style","transform","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","toFixed","createRoot","hydrateRoot","ASPECT_RATIOS","name","ImageCropper","onImageUpdate","cropBox","setCropBox","dragStart","setDragStart","currentRatioIndex","setCurrentRatioIndex","imageLoaded","setImageLoaded","showPreview","setShowPreview","previewUrl","setPreviewUrl","lockAspectRatio","setLockAspectRatio","resizeHandle","setResizeHandle","hoveredButton","setHoveredButton","customWidth","setCustomWidth","customHeight","setCustomHeight","customMode","setCustomMode","pixelWidth","setPixelWidth","pixelHeight","setPixelHeight","isCustomRatio","length","currentRatio","img","imgRect","imgWidth","imgHeight","boxWidth","boxHeight","scaleX","naturalWidth","scaleY","naturalHeight","scale","handleWheel","shiftKey","scaleFactor","newWidth","newHeight","finalX","finalY","prev","element","passive","handleMouseDown","container","dataset","handle","handleMouseUp","getCroppedImage","canvas","createElement","ctx","getContext","canvasWidth","canvasHeight","round","sourceX","sourceY","sourceWidth","sourceHeight","drawImage","onMouseEnter","Lock","Unlock","toDataURL","EyeOff","Eye","Check","map","ratio","index","parseInt","placeholder","temp","title","ArrowLeftRight","containerRect","newX","newY","mouseX","mouseY","includes","maxX","maxY","onMouseUp","draggable","Fragment","onLoad","clipPath","onMouseDown","Move","ImagePreview","imageInfo","onClear","isFullscreen","setIsFullscreen","isCropping","setIsCropping","isEditingName","setIsEditingName","modifiedName","setModifiedName","getModifiedFilename","handleNameSubmit","trim","url","onDragStart","modifiedFilename","setData","alpha","toBlob","blob","File","lastModified","Date","now","add","setDragImage","currentTarget","cursor","onDragEnd","href","download","body","appendChild","removeChild","Download","Maximize2","Crop","onKeyDown","autoFocus","Edit2","newUrl","ImageSizeInfo","exportFormat","setExportFormat","getProportionalSizes","multiplier","getCommonSizes","aspectRatio","resizeImage","async","Image","Promise","resolve","onload","fillStyle","fillRect","substring","lastIndexOf","URL","createObjectURL","bytes","size","gcd","divisor","split","toUpperCase","ImageIcon","App","setImageInfo","handleImageLoad","reader","FileReader","result","originalUrl","_b","readAsDataURL","handleImageUpdate","fetch","then","res","handleReset","RotateCcw","onDragOver","onDragLeave","onDrop","getElementById","render","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,2]}